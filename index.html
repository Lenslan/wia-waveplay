<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="/src/styles.css" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>WIA WavePlay</title>
        <script type="module" src="/src/main.ts" defer></script>
    </head>

    <body>
        <main class="container">
            <header>
                <h1>WIA WavePlay</h1>
                <span class="subtitle">Keysight VSG N5182B Controller</span>
            </header>

            <!-- Connection + Waveform side by side -->
            <div class="top-row">
                <section class="section">
                    <h2>Connection</h2>
                    <div class="form-row">
                        <input
                            type="text"
                            id="ip-input"
                            placeholder="IP Address"
                            value="192.168.1.100"
                        />
                        <button id="connect-btn">Connect</button>
                        <button id="disconnect-btn" disabled>Disconnect</button>
                    </div>
                    <div id="connection-status" class="status">
                        Not connected
                    </div>
                </section>

                <section class="section">
                    <h2>Waveform File</h2>
                    <div class="form-row">
                        <span id="file-name" class="file-label"
                            >No file selected</span
                        >
                        <button id="browse-btn">Browse...</button>
                        <button id="export-btn" disabled>Export</button>
                    </div>
                    <div class="config-row waveform-params">
                        <div class="config-item">
                            <label for="bw-input">BW (MHz)</label>
                            <input
                                type="number"
                                id="bw-input"
                                value="20"
                                step="1"
                                min="1"
                            />
                        </div>
                        <div class="config-item">
                            <label for="frame-interval-input">Frame Interval (us)</label>
                            <input
                                type="number"
                                id="frame-interval-input"
                                value="30"
                                step="1"
                                min="0"
                            />
                        </div>
                    </div>
                </section>
            </div>

            <!-- Configuration: 2 columns + repeat + controls -->
            <section class="section">
                <h2>Configuration</h2>
                <div class="config-row">
                    <div class="config-item">
                        <label for="cf-input">
                            Carrier Frequency (MHz)
                            <span class="help-icon" id="channel-help">?</span>
                        </label>
                        <div class="channel-popup" id="channel-popup">
                            <div class="channel-popup-content">
                                <div class="channel-group">
                                    <h4>2.4 GHz (LB)</h4>
                                    <table>
                                        <tr><th>MHz</th><th>Ch</th></tr>
                                        <tr><td>2412</td><td>1</td></tr>
                                        <tr><td>2417</td><td>2</td></tr>
                                        <tr><td>2422</td><td>3</td></tr>
                                        <tr><td>2427</td><td>4</td></tr>
                                        <tr><td>2432</td><td>5</td></tr>
                                        <tr><td>2437</td><td>6</td></tr>
                                        <tr><td>2442</td><td>7</td></tr>
                                        <tr><td>2447</td><td>8</td></tr>
                                        <tr><td>2452</td><td>9</td></tr>
                                        <tr><td>2457</td><td>10</td></tr>
                                        <tr><td>2462</td><td>11</td></tr>
                                        <tr><td>2467</td><td>12</td></tr>
                                        <tr><td>2472</td><td>13</td></tr>
                                    </table>
                                </div>
                                <div class="channel-group">
                                    <h4>2.4 GHz Ext</h4>
                                    <table>
                                        <tr><th>MHz</th><th>Ch</th></tr>
                                        <tr><td>2312</td><td>14</td></tr>
                                        <tr><td>2332</td><td>15</td></tr>
                                        <tr><td>2352</td><td>16</td></tr>
                                        <tr><td>2372</td><td>17</td></tr>
                                        <tr><td>2392</td><td>18</td></tr>
                                        <tr><td>2492</td><td>19</td></tr>
                                        <tr><td>2512</td><td>20</td></tr>
                                        <tr><td>2532</td><td>21</td></tr>
                                        <tr><td>2552</td><td>22</td></tr>
                                        <tr><td>2572</td><td>23</td></tr>
                                    </table>
                                </div>
                                <div class="channel-group">
                                    <h4>5 GHz (HB)</h4>
                                    <table>
                                        <tr><th>MHz</th><th>Ch</th></tr>
                                        <tr><td>5180</td><td>36</td></tr>
                                        <tr><td>5200</td><td>40</td></tr>
                                        <tr><td>5220</td><td>44</td></tr>
                                        <tr><td>5240</td><td>48</td></tr>
                                        <tr><td>5260</td><td>52</td></tr>
                                        <tr><td>5280</td><td>56</td></tr>
                                        <tr><td>5300</td><td>60</td></tr>
                                        <tr><td>5320</td><td>64</td></tr>
                                        <tr><td>5500</td><td>100</td></tr>
                                        <tr><td>5520</td><td>104</td></tr>
                                        <tr><td>5540</td><td>108</td></tr>
                                        <tr><td>5560</td><td>112</td></tr>
                                        <tr><td>5580</td><td>116</td></tr>
                                        <tr><td>5600</td><td>120</td></tr>
                                        <tr><td>5620</td><td>124</td></tr>
                                        <tr><td>5640</td><td>128</td></tr>
                                        <tr><td>5660</td><td>132</td></tr>
                                        <tr><td>5680</td><td>136</td></tr>
                                        <tr><td>5700</td><td>140</td></tr>
                                        <tr><td>5720</td><td>144</td></tr>
                                        <tr><td>5745</td><td>149</td></tr>
                                        <tr><td>5765</td><td>153</td></tr>
                                        <tr><td>5785</td><td>157</td></tr>
                                        <tr><td>5805</td><td>161</td></tr>
                                        <tr><td>5825</td><td>165</td></tr>
                                    </table>
                                </div>
                                <div class="channel-group">
                                    <h4>5 GHz Ext</h4>
                                    <table>
                                        <tr><th>MHz</th><th>Ch</th></tr>
                                        <tr><td>5080</td><td>200</td></tr>
                                        <tr><td>5100</td><td>201</td></tr>
                                        <tr><td>5120</td><td>202</td></tr>
                                        <tr><td>5140</td><td>203</td></tr>
                                        <tr><td>5160</td><td>204</td></tr>
                                        <tr><td>5845</td><td>205</td></tr>
                                        <tr><td>5865</td><td>206</td></tr>
                                        <tr><td>5885</td><td>207</td></tr>
                                        <tr><td>5905</td><td>208</td></tr>
                                        <tr><td>5925</td><td>209</td></tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <input
                            type="number"
                            id="cf-input"
                            value="2412"
                            step="0.1"
                            min="0"
                        />
                    </div>
                    <div class="config-item">
                        <label for="amp-input">Output Power (dBm)</label>
                        <input
                            type="number"
                            id="amp-input"
                            value="-20"
                            step="0.1"
                        />
                    </div>
                </div>
                <div class="repeat-row">
                    <label class="checkbox-label">
                        <input type="checkbox" id="repeat-check" />
                        <span>Limit repeats</span>
                    </label>
                    <input
                        type="number"
                        id="repeat-count"
                        value="1000"
                        min="1"
                        step="1"
                        disabled
                    />
                    <span class="repeat-hint"
                        >times (unchecked = continuous)</span
                    >
                </div>
                <div class="control-row">
                    <button id="play-btn" class="btn-play" disabled>
                        &#9654; Play
                    </button>
                    <button id="stop-btn" class="btn-stop" disabled>
                        &#9632; Stop
                    </button>
                </div>
            </section>

            <!-- Log -->
            <section class="section section-log">
                <h2>Log</h2>
                <div id="log-area" class="log-area"></div>
            </section>
        </main>
    </body>
</html>
